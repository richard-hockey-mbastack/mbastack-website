"use strict";class BindVideos{constructor(t){this.parameters=t,this.init()}init(){$(".vimeoWrapper").length>0&&this.bindVimeo(),$(".inlineWrapper").length>0&&this.bindInline(),$(".youtubeWrapper").length>0&&this.bindYoutue(),$(".videoWrapper").length>0&&this.scaleVideos()}bindVimeo(){let t=[];$(".vimeoWrapper").each((function(e){$(this).parents(".background").hasClass("videoLoaded")||t.push(new VimeoVideoLoader({container:$(this)}))}))}bindInline(){let t=[];$(".inlineWrapper").each((function(e){$(this).parents(".background").hasClass("videoLoaded")||t.push(new inlineVideoLoader({container:$(this)}))}))}bindYoutue(){$(".youtubeWrapper")}scaleVideos(){let t=$(".videoWrapper"),e=[];t.each((function(t){$(this).hasClass("scaled")||e.push(new AutoVideoScale({container:$(this)}))}))}}class VimeoVideoLoader{constructor(t){this.parameters=t,this.container=t.container,this.init()}init(){let t=this;switch(this.pwidth=$(window).width()>992?"desktop":"mobile",this.isInSlickSlider=this.container.parents(".slick-slider").length>0,$(this).css({border:"10px solid red"}),this.format=this.container.attr("data-format"),this.mode=this.container.attr("data-mode"),this.source=this.container.attr("data-source"),this.iframe=this.container.find("iframe"),this.player=new Vimeo.Player(this.iframe.get(0)),this.super=this.container.parents(".background").eq(0),this.playing=!1,this.mode){case"autoplay":this.player.getPaused().then((function(e){e||t.super.addClass("videoLoaded")})),this.player.on("play",(()=>{window.setTimeout((()=>{this.super.addClass("videoLoaded")}),10)})),this.player.on("bufferend",(()=>{this.player.play().then((function(){})).catch((function(){}))}));break;case"manual":this.super.addClass("videoLoaded");break;case"hover":if("desktop"===this.pwidth)this.csLink=this.super.parents(".caseStudy").eq(0).find("a.csLink"),this.csLink.on("mouseover",(t=>{this.playing=!0,this.player.play().then((function(){})).catch((function(){}))})),this.csLink.on("mouseout",(t=>{this.playing&&(this.player.pause(),this.playing=!1)})),window.setTimeout((()=>{this.super.addClass("videoLoaded")}),500),this.player.getPaused().then((function(e){e||t.super.addClass("videoLoaded")})),this.player.on("bufferend",(()=>{this.playing?(this.player.on("play",(()=>{window.setTimeout((()=>{this.super.addClass("videoLoaded")}),10)})),this.player.play().then((function(){})).catch((function(){}))):(this.player.pause(),this.playing=!1,window.setTimeout((()=>{this.super.addClass("videoLoaded")}),10))}))}}}class inlineVideoLoader{constructor(t){this.parameters=t,this.container=t.container,this.init()}init(){this.pwidth=$(window).width()>992?"desktop":"mobile",this.isInSlickSlider=this.container.parents(".slick-slider").length>0,this.format=this.container.attr("data-format"),this.mode=this.container.attr("data-mode"),this.source=this.container.attr("data-source"),this.target=this.container.find(".pr"),this.super=this.container.parents(".background").eq(0),this.target.append(this.buildVideoTag())}buildVideoTag(){let t=this,e='<video id="" preload="auto" muted nocontrols playsinline loop data-xephon="7188"></video>',i=null,s=$("<source></source>").attr({type:"video/mp4",src:this.source});switch(this.mode){case"autoplay":i=$(e),i.on("loadedmetadata",(function(){$(this).get(0).play().then((function(){})).catch((function(){})),t.super.addClass("videoLoaded")})),i.on("ended",(function(){$(this).get(0).currentTime=0,$(this).get(0).play().then((function(){})).catch((function(){}))})),i.append(s);break;case"manual":i=$('<video preload="auto" controls playsinline data-rah="7188"></video>'),i.on("loadedmetadata",(function(){t.super.addClass("videoLoaded")})),i.append(s);break;case"hover":switch(i=$(e),this.pwidth){case"desktop":this.csLink=this.super.parents(".caseStudy").eq(0).find("a.csLink"),this.csLink.on("mouseover",(t=>{$(t.target).parents(".caseStudy").find("video").get(0).play().then((function(){})).catch((function(){}))})),this.csLink.on("mouseout",(t=>{$(t.target).parents(".caseStudy").find("video").get(0).pause()})),i.on("loadedmetadata",(()=>{t.super.addClass("videoLoaded")}));break;case"mobile":i.on("loadedmetadata",(e=>{$(e.target).get(0).play().then((function(){})).catch((function(){})),t.super.addClass("videoLoaded")}))}i.on("ended",(function(){t.video.currentTime=0,t.video.play().then((function(){})).catch((function(){}))})),i.append(s);break;case"scroll":i=$(e),i.on("loadedmetadata",(function(){var e=$(this).get(0);e.play().then((function(){e.pause()})).catch((function(){})),$(this).attr({"data-duration":e.duration}),t.super.addClass("videoLoaded")})),i.on("ended",(function(){$(this).get(0).currentTime=0,$(this).get(0).play().then((function(){})).catch((function(){}))})),i.append(s);break;case"scrollstart":switch(i=$(e),this.pwidth){case"desktop":i.on("loadedmetadata",(e=>{$(e.target).get(0).play().then((function(){t.super.addClass("videoLoaded")})).catch((function(){}))}));break;case"mobile":i.on("loadedmetadata",(e=>{var i=$(e.target).get(0);i.play().then((function(){i.pause(),t.super.addClass("videoLoaded")})).catch((function(){}))}))}i.on("ended",(function(){$(this).get(0).currentTime=0,$(this).get(0).play().then((function(){})).catch((function(){}))})),i.append(s)}return i}}class YoutubeVideoLoader{constructor(t){this.parameters=t,this.container=t.container,this.init()}init(){this.format=this.container.attr("data-format"),this.mode=this.container.attr("data-mode"),this.source=this.container.attr("data-source"),this.target=this.container.find(".pr"),this.super=this.container.parents(".background").eq(0)}}class AutoVideoScale{constructor(t){this.parameters=t,this.container=t.container,this.init()}init(){this.format=this.container.attr("data-format"),this.source=this.container.attr("data-source"),this.noscale=this.container.hasClass("noscale"),this.scaleToHeight=this.container.hasClass("scaleToheight"),this.scaleToWidth=this.container.hasClass("scaleTowidth"),this.isFoldVieo=this.container.parents(".foldVideo").length>0,this.container.addClass("scaled"),this.target=this.container.find(".pr"),this.videoDimensions={w:this.container.attr("data-width"),h:this.container.attr("data-height")},this.containerDimensions={w:this.container.width(),h:this.container.height()},this.scale(),$(window).on("resize",(()=>{this.containerDimensions={w:this.container.width(),h:this.container.height()},this.scale()}))}scale(){let t=0,e=0,i=0;switch(this.isFoldVieo?(i=this.containerDimensions.w/this.videoDimensions.w,i*=.95,t=this.videoDimensions.w*i,e=this.videoDimensions.h*i):this.noscale?(this.scaleToHeight&&(i=this.containerDimensions.h/this.videoDimensions.h),this.scaleToWidth&&(i=this.containerDimensions.w/this.videoDimensions.w),t=this.videoDimensions.w*i,e=this.videoDimensions.h*i):(i=this.containerDimensions.w/this.videoDimensions.w+.01,t=this.videoDimensions.w*i,e=this.videoDimensions.h*i,this.containerDimensions.h>e&&(i=this.containerDimensions.h/e+.01,t*=i,e*=i)),this.target.css({width:t+"px",height:e+"px"}),this.format){case"vimeo":this.target.find("iframe").css({width:t+"px",height:e+"px"}).attr({width:t,height:e});break;case"inline":this.target.find("video").css({width:t+"px",height:e+"px"}).attr({width:t,height:e})}}}class BuggerScroller{constructor(t){this.parameters=t,this.trigger=t.trigger,this.phases2=t.phases,this.init()}init(){this.triggerNode=this.trigger,this.currentTarget="",this.getDimensions(),$(window).on("resize",(()=>{this.getDimensions()})),$(window).scroll((()=>{this.monitor($(window).scrollTop())}))}template(){}getDimensions(){this.top=this.triggerNode.position().top,this.height=this.triggerNode.height(),this.bottom=this.top+this.height,this.wh=$(window).height()}monitor(t){if(t<this.top&&this.update(0),t>this.top&&t+this.wh<this.bottom){let e=this.top,i=(t-e)/(this.bottom-this.wh-e);this.update(i)}t+this.wh>this.bottom&&this.update(1)}update(t){let e=100*t,i=0;for(;i<this.phases2.length;){let t=this.phases2[i];if(t.start<=e&&e<=t.stop){this.currentTarget!==t.id&&(this.currentTarget=t.id,$("#ct").text(this.currentTarget),this.activeTarget=$("#"+t.id),$(".cbitem").not(this.activeTarget).css({opacity:0,display:"none"}));let i=t.stop-t.start,s="fadein"===t.action?(e-t.start)/i:1-(e-t.start)/i;this.activeTarget.css({opacity:s,display:"block"})}i++}}}class BatchItems{constructor(t){this.parameters=t}init(){}}class GenericScrollHandler{constructor(t){this.parameters=t,this.trigger=t.trigger,this.subject=t.subject,this.animateOnce=t.animateOnce,this.monitorAction=t.monitor,this.updateAction=t.update,this.getDimensionsAction=t.getDimensions,this.init()}init(){this.animationComplete=!1,this.state=!1,this.itemID=this.trigger.attr("id"),this.getDimensions(),this.monitor($(window).scrollTop()),this.resizer=$(window).on("resize.getDimensions",(()=>{this.getDimensions()})),this.scroller=$(window).scroll((()=>{this.monitor($(window).scrollTop())}))}getDimensions(){this.animateOnce&&this.animationComplete||(this.wh=$(window).height(),this.getDimensionsAction(this))}monitor(t){this.animateOnce&&this.animationComplete||this.monitorAction(this,t)}update(t){this.updateAction(this,t)}}class ImageLoader{constructor(t){this.parameters=t,this.class=t.class,this.parentID=t.parentID,this.source=t.source,this.alt=t.alt,this.loads=t.loads,this.fails=t.fails,this.init()}init(){var t=this;this.noloadTimeout=window.setTimeout((()=>{t.fails(),$("#post-"+this.parentID).addClass("imageFail")}),250),this.newImg=$("<img></img>").addClass(this.class).attr({src:this.source,alt:this.alt,"data-parent":this.parentID}).on("load",(function(e){clearTimeout(t.noloadTimeout),t.loads()}))}serverImage(){return this.newImg}}function QueueSingle(t){this.parameters=t,this.actions=t.actions,this.settings=t.settings,this.workers=[],this.workerIndex=0,this.workerCount=0,this.running=!1,this.init()}QueueSingle.prototype={constructor:QueueSingle,template:function(){},init:function(){},addItem:function(t){return this.workers.push(t),this.workerCount=this.workers.length,this.workerCount},startQueue:function(){this.actions.queueStart(this),this.startWorker(),this.running=!0},startWorker:function(){this.workerIndex<this.workerCount?this.actions.itemStart(this,this.workers[this.workerIndex]):this.queueComplete()},workerComplete:function(){this.actions.itemComplete(this,this.workers[this.workerIndex]),this.workerIndex++,this.startWorker()},queueComplete:function(){this.actions.queueComplete(this),this.running=!1}};class QueueItem{constructor(t){this.parameters=t,this.properties=t.properties,this.parentQueue=t.parentQueue,this.startAction=t.startAction,this.completeAction=t.completeAction,this.init()}init(){this.active=!1,this.completed=!1}start(){this.active=!0,this.startAction(this.parentQueue,this)}complete(){this.active=!1,this.completed=!0,this.completeAction(this),this.parentQueue.workerComplete(this.properties.name)}}class Queue{constructor(t){this.itemDelay=t.itemDelay,this.workerLimit=t.workerLimit,this.queueStartAction=t.queueStartAction,this.queueCompleteAction=t.queueCompleteAction,this.workerStartAction=t.workerStartAction,this.workerCompleteAction=t.workerCompleteAction,this.init()}init(){this.items=[],this.itemCount=0,this.activeItemsBox=[],this.activeItems=0,this.running=!1}addItems(t){let e=0;for(;e<t.length;)this.addItem(t[e]),e++}addItem(t){t.index=this.items.length,this.items.push(t),this.itemCount++}removeItem(t){}initWorker(){let t=this.items.pop(),e=new QueueItem({properties:t,parentQueue:this,startAction:this.workerStartAction,completeAction:this.workerCompleteAction});this.activeItemsBox.push(e),this.workerStart(e),this.activeItems++}queueStart(){if(this.queueStartAction(this),this.items.length>0){let t=0;for(;this.activeItems<this.workerLimit&&t<this.itemCount;)this.initWorker(),t++;this.running=!0}}queueStop(){}queuePause(){}queueComplete(){this.queueCompleteAction(this)}workerStart(t){t.start()}workerComplete(t){if(this.running){let e=0;for(;e<this.activeItemsBox.length;){if(this.activeItemsBox[e].properties.name===t)break;e++}this.activeItemsBox.splice(e,1),this.items.length>0&&this.initWorker(),0===this.items.length&&0===this.activeItemsBox.length&&(this.running=!1,this.queueComplete(this))}}}let NewsLoader=function(t){this.parameters=t,this.newsModule=t.newsmodule,this.init()};NewsLoader.prototype={constructor:NewsLoader,template:function(){},init:function(){var t=this;this.state={visibleitems:this.newsModule.attr("data-visible"),currentfilter:this.newsModule.attr("data-current-filter"),showloadmore:!0},this.constants={moduleid:this.newsModule.attr("id"),initialitems:this.newsModule.attr("data-initial"),pagesize:this.newsModule.attr("data-pagesize"),availablefilters:this.newsModule.attr("data-filters"),filterclipper:this.newsModule.attr("data-filter-clipper"),leaditem:this.newsModule.attr("data-lead-item"),followitemtarget:this.newsModule.attr("data-follow-item-target"),followitemclipper:this.newsModule.attr("data-follow-item-clipper"),loadmorecontrol:this.newsModule.attr("data-load-more-control"),filtercontrol:this.newsModule.attr("data-filter-control"),leaditemtemplate:this.newsModule.attr("data-lead-item-template"),followingitemtemplate:this.newsModule.attr("data-following-item-template")},this.templates={leadItem:$("#"+this.constants.leaditemtemplate),followingItem:$("#"+this.constants.followingitemtemplate)},this.loadMoreButton=$("#"+this.constants.loadmorecontrol),this.filterButtons=$("#"+this.constants.filtercontrol+" button"),this.loadMoreButton.on("click",(function(e){e.preventDefault(),t.doLoadMore()})),this.filterButtons.on("click",(function(e){e.preventDefault(),t.doFilter($(this).attr("data-action"))}))},doLoadMore:function(){var t=this;$.ajax({url:localize_vars.ajaxurl,type:"GET",data:{action:"morenews",filter:this.state.currentfilter,visible:this.state.visibleitems,pagesize:this.constants.pagesize},dataType:"json",success:function(e){t.processLoadMoreResponse(e)}})},processLoadMoreResponse:function(t){$("#"+this.constants.followitemclipper).removeClass("closed"),this.updateState([{field:"visibleitems",value:t.ids},{field:"showloadmore",value:t.loadmore}]),t.loadmore||$("#"+this.constants.loadmorecontrol).addClass("closed"),this.buildItemQueue(t.items,this.constants.followitemclipper,"append")},doFilter:function(t){var e=this;t!==this.state.currentfilter?(this.state.currentfilter=t,$.ajax({url:localize_vars.ajaxurl,type:"GET",data:{action:"filternews",filter:this.state.currentfilter,initial:this.constants.initialitems},dataType:"json",success:function(t){e.processFilterResponse(t)}})):console.log("no action")},processFilterResponse:function(t){var e=this;this.updateState([{field:"currentfilter",value:t.filter},{field:"visibleitems",value:t.ids},{field:"showloadmore",value:t.loadmore}]),$("#"+this.constants.filterclipper).addClass("closed"),$("#"+this.constants.leaditem).find(".newsitem").remove(),$("#"+this.constants.followitemtarget).find(".newsitem").remove(),$("#"+this.constants.followitemclipper).find(".newsitem").remove(),t.loadmore?$("#"+this.constants.loadmorecontrol).removeClass("closed"):$("#"+this.constants.loadmorecontrol).addClass("closed");let i=$("#"+this.constants.filtercontrol).find("li"),s=$("#"+this.constants.filtercontrol).find("button[data-action='"+this.state.currentfilter+"']").parents("li");i.not(s).removeClass("active"),s.addClass("active"),$("#"+this.constants.filterclipper).removeClass("closed"),this.buildItem({item:t.lead,template:e.templates.leadItem,mode:"append",target:$("#"+this.constants.leaditem),callback:i=>{window.setTimeout((()=>{i.addClass("ready")}),250);e.buildItemQueue(t.items,e.constants.followitemtarget,"append")}})},buildItem:function(t){let e=t.template.clone();e.removeClass("template"),e.addClass("newsitem"),e.attr({id:"post-"+t.item.id,"data-post-id":t.item.id});let i=t.target,s=null,o=new ImageLoader({class:"post",parentID:t.item.id,source:t.item.image,alt:t.item.title,loads:()=>{},fails:()=>{}}).serverImage();e.find("h3").html(t.item.title),e.find("p.synopsis").html(t.item.synopsis),e.find("p.strikethrough span.date").text(t.item.date),e.find("p.strikethrough span.category").text(t.item.category);let a=e.find("figure a");a.append(o),""!==t.item.external_site_logo&&(s=$("<img></img>").addClass("externalLogo").attr({src:t.item.external_site_logo}),e.find("figure").append(s));var n=$("<div/>").html(t.item.title).text();a.attr({title:n}),"external"===t.item.has_external_link?a.attr({target:"_blank",href:t.item.link_url}):a.attr({href:t.item.permalink});let r=e.find("a.arrowLink");switch("external"===t.item.has_external_link?(r.attr({target:"_blank",href:t.item.link_url}),r.find("span").text(t.item.link_caption)):(r.attr({href:t.item.permalink}),r.find("span").text("read more")),t.mode){case"insert-before":e.insertBefore("#"+this.constants.followitemclipper);break;case"append":i.append(e)}return t.callback(e),!0},buildItemQueue:function(t,e,i){var s=this;this.postQueue=new QueueSingle({settings:{delay:250},actions:{queueStart:function(t){},itemStart:function(t,o){s.buildItem({item:o.item,mode:i,template:s.templates.followingItem,target:$("#"+e),callback:e=>{window.setTimeout((()=>{o.node=e,t.workerComplete()}),t.settings.delay)}})},itemComplete:function(t,e){e.node.addClass("ready")},queueComplete:function(t){}}});let o=0;for(;o<t.length;){let e=t[o];this.postQueue.addItem({id:e.id,item:e}),o++}this.postQueue.startQueue()},updateState:function(t){let e=0;for(;e<t.length;){let i=t[e];switch(i.field){case"visibleitems":this.state.visibleitems=i.value,this.newsModule.attr({"data-visible":i.value});break;case"currentfilter":this.state.currentfilter=i.value,this.newsModule.attr({"data-current-filter":i.value});break;case"showloadmore":this.state.showloadmore=i.value}e++}},banana:function(t){console.log("NewsLoader banana: '%s",t)}};class Counter{constructor(t){this.parameters=t,this.node=t.node,this.max=t.max,this.init()}init(){let t=null;t=this.max.match(/[0-9]+/),t&&(this.type="int",this.n=parseInt(this.max,10)),t=this.max.match(/[0-9]+\.[0-9]+/),t&&(this.type="float",this.n=parseFloat(this.max,10)),this.node.text("0")}update(t){switch(this.type){case"int":this.node.text(Math.ceil(this.n*t));break;case"float":this.node.text((this.n*t).toLocaleString("en-EN",{minimumFractionDigits:1,maximumFractionDigits:1}))}}}class MergeVideoStarter{constructor(t){this.target=t.target,this.video=t.video,this.init()}init(){}start(){}}class FuseVideoScroll{constructor(t){this.target=t.target,this.video=t.video,this.init()}init(){let t=this;this.ready=!1,$(this.video).on("loadedmetadata",(function(){var e=$(this).get(0);t.ready=!0,t.duration=e.duration,t.videoElement=e}))}scroll(t){t>0&&t<1&&this.ready&&window.requestAnimationFrame((()=>{this.videoElement.currentTime=this.duration*t}))}}class PageAnimations{constructor(t){this.parameters=t,this.init()}init(){}apply(){const t=/(twoColumnMixed|sharedCaseStudies|latestClients|latest-news|people|homeValues|singleColumn|fuse|tools|cxmv3|nimble|group|twoColumnParallax|otherPosts|trinity|awards|fullWidthImage|case-study-banner|case-study-intro|case-study-single_column_text|case-study-fullwidth_image|case-study-awards|case-study-fullwidth_video|case-study-image_carousel|case-study-two_column_media|singlePost|valuesBlocks)/;gsap.utils.toArray(".module").forEach((e=>{let i=e.getAttribute("class").match(t);if(i){let t=i[0];if("homeBanner"===t||"pageBanner"===t);else switch(console.log("box: '%s'",t),t){case"twoColumnMixed":{let t=$(e),i=t.find(".textColumn"),s=t.find(".imageColumn");gsap.to(i,{y:-500,autoAlpha:1,scrollTrigger:{start:()=>"top-="+halfheight,end:"bottom bottom",markers:!1,trigger:e,scrub:!1}}),gsap.to(s,{y:-500,autoAlpha:1,scrollTrigger:{start:()=>"top-="+halfheight,end:"bottom bottom",trigger:e,scrub:!1}})}break;case"sharedCaseStudies":$(e);break;case"latestClients":this.batchAnimation(".latestClients .item",6,{e1:{autoAlpha:1,y:-500,stagger:.15,overwrite:!0}});break;case"latest-news":case"otherPosts":$(e);this.batchAnimation(".newsitem",3,{e1:{autoAlpha:1,y:-500,stagger:.15,overwrite:!0}});break;case"people":{let t=$(e);if(t.hasClass("peopleSlickSlider"));else{let i=t.find(".teamIntro");gsap.to(i,{y:-500,autoAlpha:1,scrollTrigger:{start:"top bottom",end:"bottom bottom",trigger:e,scrub:!1}}),this.batchAnimation(".people .item",3,{e1:{autoAlpha:1,y:-500,stagger:.15,overwrite:!0}})}}break;case"singleColumn":case"fuse":case"case-study-image_carousel":break;case"tools":$(e);break;case"cxm":$(e);break;case"group":$(e);break;case"twoColumnParallax":$(e);this.batchAnimation(".twoColumnParallax .image, .twoColumnParallax .text",2,{e1:{autoAlpha:1,y:-500,stagger:.15,overwrite:!0}});break;case"valuesBlocks":$(e);this.batchAnimation(".valuesBlocks .image, .valuesBlocks .text",2,{e1:{autoAlpha:1,y:-500,stagger:.15,overwrite:!0}});break;case"trinity":console.log("trinity");$(e);break;case"awards":{let t=$(e).find(".introbox"),i=t.height();gsap.to(t,{y:-500,autoAlpha:1,scrollTrigger:{start:()=>"top-="+.75*winheight,end:()=>"top-="+(halfheight-i),trigger:e,scrub:!1,markers:!1}}),this.batchAnimation(".awards .award",3,{e1:{autoAlpha:1,y:-500,stagger:.15,overwrite:!0}})}break;case"fullWidthImage":$(e);break;case"case-study-banner":$(e);break;case"case-study-intro":{let t=$(e).find("p");gsap.to(t,{y:-500,autoAlpha:1,scrollTrigger:{start:()=>"top-="+(winheight+250),end:()=>"top-="+winheight,trigger:e,scrub:!1,markers:!1}})}break;case"case-study-fullwidth_image":{let t=$(e),i=t.find("img"),s=i.attr("width"),o=i.attr("height"),a=t.find("figure").width()/s,n=s*a,r=o*a;t.find("figure").attr({width:n,height:r}),$(window).on("resize",(()=>{let e=t.find("img"),i=e.attr("width"),s=e.attr("height"),o=t.find("figure").width()/i,a=i*o,n=s*o;t.find("figure").attr({width:a,height:n})}));let l=r,h=t.find("figure");gsap.to(h,{y:-500,autoAlpha:1,scrollTrigger:{start:()=>"top-="+(winheight+l/2),end:()=>"top-="+(winheight+l/2-250),trigger:e,scrub:!1,markers:!1}})}break;case"case-study-awards":{$(e);let t=[],i=$(".case-study-awards .items .point");i.each((function(e){t.push(new Counter({node:$(this).find(".value"),max:$(this).attr("data-value-max")}))}));new GenericScrollHandler({trigger:$(".case-study-awards"),subject:$(".case-study-awards"),animateOnce:!0,getDimensions:t=>{t.top=t.trigger.position().top,t.height=t.trigger.height(),t.bottom=t.top+t.height,t.start=t.top-.75*t.wh,t.end=t.bottom-.5*t.wh},monitor:(t,e)=>{if(e<t.start&&t.update(0),e>t.start&&e<t.end){let i=(e-t.start)/(t.end-t.start);t.update(i)}e>=t.end&&t.update(1)},update:(e,s)=>{i.css({opacity:s,top:Math.floor(250*(1-s))+"px"}),t.map((function(t){t.update(s)}),this)}})}break;case"case-study-fullwidth_video":{let t=$(e),i=t.height(),s=t.find(".videoBox");gsap.to(s,{y:-500,autoAlpha:1,scrollTrigger:{start:()=>"top-="+(winheight+i/2),end:()=>"top-="+(winheight+i/2-250),trigger:e,scrub:!1}})}break;case"case-study-two_column_media":{let t=$(e),i=(t.height(),[]);t.find(".media").each((function(t){let s=$(this),o=s.height();i.push(gsap.to(s,{y:-500,autoAlpha:1,scrollTrigger:{start:()=>"top-="+(winheight+o/2),end:()=>"top-="+(winheight+o/2-250),trigger:e,scrub:!1}}))}))}break;case"singlePost":{let t=$(e),i=[];t.find(".content p, .content figure").each((function(t){let e=$(this);e.height();i.push(gsap.to(e,{y:-500,autoAlpha:1,scrollTrigger:{start:()=>"top-="+(winheight+250),end:()=>"top-="+(winheight+250-250),trigger:e,scrub:!1,markers:!1}}))}))}}}})),this.lottieScroller()}batchAnimation(t,e,i){!function(t,e){let i,s={},o=e.interval||.1,a=(t,i)=>{let s=[],a=gsap.delayedCall(o,(()=>{i(s),s.length=0})).pause();return t=>{s.length||a.restart(!0),s.push(t.trigger),e.batchMax&&e.batchMax<=s.length&&a.progress(1)}};for(i in e)s[i]=~i.indexOf("Enter")||~i.indexOf("Leave")?a(0,e[i]):e[i];gsap.utils.toArray(t).forEach((t=>{let e={};for(i in s)e[i]=s[i];e.trigger=t,ScrollTrigger.create(e)}))}(t,{interval:.1,batchMax:e,onEnter:t=>gsap.to(t,i.e1),start:()=>"top-="+(winheight+480),end:()=>"top-="+winheight,markers:!1})}lottieScroller(){if($("section.cxmv3").length>0){let t=$(".lst-cxm"),e=t.attr("data-source"),i=lottie.loadAnimation({container:t.get(0),renderer:"svg",loop:!1,autoplay:!1,path:e});new GenericScrollHandler({trigger:$(".cxmv3"),subject:$(".cxmv3 figure"),animateOnce:!1,getDimensions:t=>{t.top=t.trigger.position().top,t.height=t.trigger.height(),t.bottom=t.top+t.height,t.start=t.top-t.wh/2,t.end=t.bottom-t.wh/2},monitor:(t,e)=>{if(t.state=!1,e<t.start&&t.update(0),e>t.start&&e<t.end){let i=(e-t.start)/(t.end-t.start);t.state=!0,t.update(i)}e>t.end&&t.update(1)},update:(t,e)=>{i.goToAndStop(e*(i.totalFrames-1),!0)}})}if($("section.tools").length>0&&windowSize.w>991){new GenericScrollHandler({trigger:$(".tools"),subject:$(".tools .items"),animateOnce:!1,getDimensions:t=>{t.top=t.trigger.position().top,t.height=t.trigger.height(),t.bottom=t.top+t.height,t.start=t.top,t.end=t.bottom-t.wh,t.current=0},monitor:(t,e)=>{if(e<t.top&&t.update(0),e>=t.top&&e<=t.top+toolTrack){let i=(e-t.top)/toolTrack;t.update(i)}},update:(t,e)=>{if(e>0){let t=e*toolTrack;$(".tools").css({"margin-top":t+"px"})}let i=$(".toolsProgress li"),s=$(".toolsWrapper2"),o=1/s.find(".item").length;e>0&&e<1*o&&(t.current=0,s.css({left:"0%"}),i.eq(0).addClass("active"),i.slice(1,5).removeClass("active")),e>1*o&&e<2*o&&(t.current=1,s.css({left:"-100%"}),i.slice(0,2).addClass("active"),i.slice(2,5).removeClass("active")),e>2*o&&e<3*o&&(t.current=2,s.css({left:"-200%"}),i.slice(0,3).addClass("active"),i.slice(3,5).removeClass("active")),e>3*o&&e<4*o&&(t.current=3,s.css({left:"-300%"}),i.slice(0,4).addClass("active"),i.slice(4,5).removeClass("active")),e>4*o&&e<5*o&&(t.current=4,s.css({left:"-400%"}),i.slice(0,5).addClass("active"),i.slice(5,6).removeClass("active")),e>5*o&&e<1&&(t.current=5,s.css({left:"-500%"}),i.addClass("active")),e>5*o?$(".toolsProgress").addClass("end"):$(".toolsProgress").removeClass("end")}})}if($(".lst-group").length>0){let t=$(".lst-group-m"),e=t.attr("data-source"),i=lottie.loadAnimation({container:t.get(0),renderer:"svg",loop:!1,autoplay:!1,path:e}),s=$(".lst-group-d"),o=s.attr("data-source"),a=lottie.loadAnimation({container:s.get(0),renderer:"svg",loop:!1,autoplay:!1,path:o});new GenericScrollHandler({trigger:$(".group"),subject:$(".group figure.mapgraph"),animateOnce:!1,getDimensions:t=>{t.top=t.trigger.position().top,$(".toolsWrapper1").length>0&&(t.top=t.top+toolTrack);let e=t.trigger.find(".topclip").height(),i=t.trigger.find(".msqinfo").height();t.top=t.top+(e+i),t.height=t.trigger.height(),t.bottom=t.top+t.height,t.start=t.top-t.wh/2,t.end=t.top},monitor:(t,e)=>{if(t.state=!1,e<t.start&&t.update(0),e>t.start&&e<t.end){let i=(e-t.start)/(t.end-t.start);t.state=!0,t.update(i)}e>t.end&&t.update(1)},update:(t,e)=>{a.goToAndStop(e*(a.totalFrames-1),!0),i.goToAndStop(e*(i.totalFrames-1),!0)}})}}}class PeopleBios{constructor(t){this.bioOverlayModuleSelector=t.bioOverlayModuleSelector,this.carouselSelector=t.carouselSelector,this.imageBinSelector=t.imageBinSelector,this.overlayFrameSelector=t.overlayFrameSelector,this.slickSliderSelector=t.slickSliderSelector,this.peopleItemsSelector=t.peopleItemsSelector,this.afterSlickSliderInit=t.afterSlickSliderInit,this.afterSlickSliderBreakpoint=t.afterSlickSliderBreakpoint,this.init()}init(){let t=this;this.people=[],this.peopleCount=0,this.currentPerson=-1,this.peopleImages=[],this.bioOverlaysEnabled=!1,this.peopleCarouselEnabled=!1,this.slickSlider=null,this.overlayFrame=null,this.bioOverlayModule=$(this.bioOverlayModuleSelector),this.bioOverlayModule.length>0&&(this.bioOverlaysEnabled=!0,this.overlayFrame=$(this.overlayFrameSelector),this.imageBin=$(this.imageBinSelector),this.ajaxLoad(),this.overlayClose(),this.overlayPaging(),$(this.peopleItemsSelector).on("click",(function(e){e.preventDefault(),t.personClick($(this))})),$(this.peopleItemsSelector).find(".socialLinks a").on("click",(function(t){t.stopPropagation()})),$(this.peopleItemsSelector).find(".biov2 p a").on("click",(function(t){t.stopPropagation()}))),this.carousel=$(this.carouselSelector),this.carousel.length>0&&(this.peopleCarouselEnabled=!0,this.sspNode=$(this.slickSliderSelector))}updateBioOverlay(t){let e=t.person,i=$("#bioOverlay");$("#bioPhoto").attr({src:e.full,alt:e.forename+" "+e.surname+" - "+e.role}).on("load",(function(t){})),$("#bioName").text(e.forename+" "+e.surname),$("#bioRole").text(e.role);var s=$("<div/>").html(e.bio);$("#bioCopy").empty().append($("<p></p>").html(s));let o=i.find(".socialLinks"),a=""!==e.linkedin,n=(e.facebook,""!==e.email);e.phone;if(a||n){let t=o.find(".linkedin");a?t.attr({href:e.linkedin}).show():t.hide();let i=o.find(".email");n?i.attr({href:"mailto:"+e.email}).show():i.hide(),o.find(".contactForename").text(e.forename),o.show()}else o.hide()}getPerson(t){let e=0;for(;e<this.peopleCount;){if("person-"+this.people[e].slug===t)return{person:this.people[e],index:e};e++}return!1}getPersonBySlug(t){let e=0;for(;e<this.peopleCount;){if(this.people[e].slug===t)return{person:this.people[e],index:e};e++}return!1}ajaxLoad(){let t=this;$.ajax({url:localize_vars.ajaxurl,type:"GET",data:{action:"peoplepreload",context:$("section.people").attr("data-context")},dataType:"json",success:function(e){if(t.people=e.people,t.peopleCount=t.people.length,-1!==window.location.href.indexOf("people")){let e=/people\/#([a-z\-]+)/.exec(window.location.href);if(e){let i=t.getPersonBySlug(e[1]);switch(pageSize){case"desktop":t.updateBioOverlay(i),$("html, body").stop().animate({scrollTop:0},300),t.overlayFrame.addClass("open");break;case"mobile":{let t=$("#person-"+i.person.slug),e=t.position().top+400;t.toggleClass("open"),window.setTimeout((function(){window.scrollTo(0,e)}),125)}}}}let i=new QueueSingle({settings:{delay:50},actions:{queueStart:function(t){},itemStart:function(e,i){let s=$("<img />").attr({src:i.item.image,"data-person":i.item.person,"data-type":i.item.type}).on("load",(function(i){window.setTimeout((()=>{t.imageBin.append(s),e.workerComplete()}),e.settings.delay)}))},itemComplete:function(t,e){},queueComplete:function(t){}}}),s=0;for(;s<t.people.length;){let e=t.people[s];i.addItem({item:{person:e.id,type:"portrait",image:e.portrait}}),i.addItem({item:{person:e.id,type:"full",image:e.full}}),s++}i.startQueue()}})}personClick(t){let e=t,i=e.attr("id"),s=this.getPerson(i);switch(this.currentPerson=s.index,pageSize){case"desktop":this.updateBioOverlay(s),$("html, body").stop().animate({scrollTop:$("body").offset().top},300),this.overlayFrame.addClass("open");break;case"mobile":e.toggleClass("open")}}overlayClose(){let t=this;$(".closeBioOverlay").on("click",(function(e){e.preventDefault(),t.overlayFrame.removeClass("open")})),this.overlayFrame.find(".white").on("click",(function(e){t.overlayFrame.removeClass("open")}))}smIconsAction(){}overlayPaging(){let t=this;$(".paging li").on("click",(function(e){e.preventDefault();let i=-1;switch($(this).attr("class")){case"previous":i=t.currentPerson-1,i<0&&(i=t.peopleCount-1);break;case"next":i=t.currentPerson+1,i===t.peopleCount&&(i=0)}t.currentPerson=i,t.updateBioOverlay(t.getPersonBySlug(t.people[t.currentPerson].slug))}))}slickSlideBreakpointEvent(){let t=this;this.sspNode.on("breakpoint",(function(e,i,s){t.afterSlickSliderBreakpoint()}))}slickSlideInitEvent(){let t=this;this.sspNode.on("init",(function(e,i,s){$(".fwop").children().each((function(t){$(this).get(0).addEventListener("transitionend",(t=>{t.stopPropagation()}))})),$(".fwop").get(0).addEventListener("transitionend",(t=>{new GenericScrollHandler({trigger:$(".peopleSlickSlider"),subject:$(".peopleSlickSlider"),animateOnce:!0,getDimensions:t=>{t.top=t.trigger.position().top,t.height=t.trigger.height(),t.bottom=t.top+t.height,t.start=t.top-t.wh/2,t.end=t.bottom-t.wh/2},monitor:(t,e)=>{e>t.start&&e<t.end?t.update(1):t.update(0)},update:(t,e)=>{e>0&&$(".people .item").addClass("ready")}})})),$(".fwop").addClass("ready"),t.afterSlickSliderInit()}))}slickSlideSetup(){this.sspNode.slick({dots:!1,arrows:!0,infinite:!0,slidesToShow:4,slidesToScroll:4,rows:2,responsive:[{breakpoint:1400,settings:{slidesToShow:4,slidesToScroll:4,rows:2}},{breakpoint:1200,settings:{slidesToShow:3,slidesToScroll:3,rows:2}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2,rows:2}},{breakpoint:768,settings:{dots:!1,arrows:!0,slidesToShow:1,slidesToScroll:1,rows:2}}]})}}
//# sourceMappingURL=classes.min.js.map